import{A as t,u as e,W as i,X as s,r as l,o,c as a,w as n,n as r,d as c,a as d,b as u,f as p,j as h,t as m,g as f,y as g,k as y,Y as b,B as _,p as k,T as w,e as S,x,F as v}from"./index-56a3e0d1.js";import{_ as C}from"./uni-icons.f5ef22f9.js";import{r as B}from"./uni-app.es.615e6353.js";import{_ as T}from"./uni-badge.1255b4c5.js";import{_ as j}from"./plugin-vueexport-helper.1b428a4d.js";import{_ as $}from"./uni-section.dd6559c8.js";import{_ as F}from"./uni-popup.1aa6a8f8.js";import{y as I,z as A}from"./index.be3ddac0.js";const z=j({name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},badgeStyle:{type:Object,default:()=>({})},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:()=>({type:"",color:"#000000",size:20,customPrefix:""})},border:{type:Boolean,default:!0},customStyle:{type:Object,default:()=>({padding:"",backgroundColor:"#FFFFFF"})},keepScrollPosition:{type:Boolean,default:!1}},watch:{"customStyle.padding":{handler(t){"number"==typeof t&&(t+="");let e=t.split(" ");if(1===e.length){const t=e[0];this.padding={top:t,right:t,bottom:t,left:t}}else if(2===e.length){const[t,i]=e;this.padding={top:t,right:i,bottom:t,left:i}}else if(4===e.length){const[t,i,s,l]=e;this.padding={top:t,right:i,bottom:s,left:l}}},immediate:!0}},data:()=>({isFirstChild:!1,padding:{top:"",right:"",bottom:"",left:""}}),mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm(t="uniList"){let e=this.$parent,i=e.$options.name;for(;i!==t;){if(e=e.$parent,!e)return!1;i=e.$options.name}return e},onClick(){""===this.to?(this.clickable||this.link)&&this.$emit("click",{data:{}}):this.openPage()},onSwitchChange(t){this.$emit("switchChange",t.detail)},openPage(){-1!==["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(l){let o={url:this.to,success:t=>{this.$emit("click",{data:t})},fail:t=>{this.$emit("click",{data:t})}};switch(l){case"navigateTo":default:t(o);break;case"redirectTo":s(o);break;case"reLaunch":i(o);break;case"switchTab":e(o)}}}},[["render",function(t,e,i,s,_,k){const w=f,S=g,x=B(l("uni-icons"),C),v=y,j=B(l("uni-badge"),T),$=b;return o(),a(w,{class:r([{"uni-list-item--disabled":i.disabled},"uni-list-item"]),style:u({"background-color":i.customStyle.backgroundColor}),"hover-class":!i.clickable&&!i.link||i.disabled||i.showSwitch?"":"uni-list-item--hover",onClick:k.onClick},{default:n((()=>[_.isFirstChild?c("",!0):(o(),a(w,{key:0,class:r(["border--left",{"uni-list--border":i.border}])},null,8,["class"])),d(w,{class:r(["uni-list-item__container",{"container--right":i.showArrow||i.link,"flex--direction":"column"===i.direction}]),style:u({paddingTop:_.padding.top,paddingLeft:_.padding.left,paddingRight:_.padding.right,paddingBottom:_.padding.bottom})},{default:n((()=>[p(t.$slots,"header",{},(()=>[d(w,{class:"uni-list-item__header"},{default:n((()=>[i.thumb?(o(),a(w,{key:0,class:"uni-list-item__icon"},{default:n((()=>[d(S,{src:i.thumb,class:r(["uni-list-item__icon-img",["uni-list--"+i.thumbSize]])},null,8,["src","class"])])),_:1})):i.showExtraIcon?(o(),a(w,{key:1,class:"uni-list-item__icon"},{default:n((()=>[d(x,{customPrefix:i.extraIcon.customPrefix,color:i.extraIcon.color,size:i.extraIcon.size,type:i.extraIcon.type},null,8,["customPrefix","color","size","type"])])),_:1})):c("",!0)])),_:1})]),!0),p(t.$slots,"body",{},(()=>[d(w,{class:r(["uni-list-item__content",{"uni-list-item__content--center":i.thumb||i.showExtraIcon||i.showBadge||i.showSwitch}])},{default:n((()=>[i.title?(o(),a(v,{key:0,class:r(["uni-list-item__content-title",[0!==i.ellipsis&&i.ellipsis<=2?"uni-ellipsis-"+i.ellipsis:""]])},{default:n((()=>[h(m(i.title),1)])),_:1},8,["class"])):c("",!0),i.note?(o(),a(v,{key:1,class:"uni-list-item__content-note"},{default:n((()=>[h(m(i.note),1)])),_:1})):c("",!0)])),_:1},8,["class"])]),!0),p(t.$slots,"footer",{},(()=>[i.rightText||i.showBadge||i.showSwitch?(o(),a(w,{key:0,class:r(["uni-list-item__extra",{"flex--justify":"column"===i.direction}])},{default:n((()=>[i.rightText?(o(),a(v,{key:0,class:"uni-list-item__extra-text"},{default:n((()=>[h(m(i.rightText),1)])),_:1})):c("",!0),i.showBadge?(o(),a(j,{key:1,type:i.badgeType,text:i.badgeText,"custom-style":i.badgeStyle},null,8,["type","text","custom-style"])):c("",!0),i.showSwitch?(o(),a($,{key:2,disabled:i.disabled,checked:i.switchChecked,onChange:k.onSwitchChange},null,8,["disabled","checked","onChange"])):c("",!0)])),_:1},8,["class"])):c("",!0)]),!0)])),_:3},8,["class","style"]),i.showArrow||i.link?(o(),a(x,{key:1,size:16,class:"uni-icon-wrapper",color:"#bbb",type:"arrowright"})):c("",!0)])),_:3},8,["class","style","hover-class","onClick"])}],["__scopeId","data-v-77963a5a"]]);const P=j({name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{stackFromEnd:{type:Boolean,default:!1},enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0},renderReverse:{type:Boolean,default:!1}},created(){this.firstChildAppend=!1},methods:{loadMore(t){this.$emit("scrolltolower")},scroll(t){this.$emit("scroll",t)}}},[["render",function(t,e,i,s,l,r){const d=f;return o(),a(d,{class:"uni-list uni-border-top-bottom"},{default:n((()=>[i.border?(o(),a(d,{key:0,class:"uni-list--border-top"})):c("",!0),p(t.$slots,"default",{},void 0,!0),i.border?(o(),a(d,{key:1,class:"uni-list--border-bottom"})):c("",!0)])),_:3})}],["__scopeId","data-v-c1d7c358"]]),L=_("comment",(()=>{const t=k([]);k([]);return console.log(t),{getComments:async e=>{if(e){const i=await I(e);return t.value=i.comments,t}{const e=await A();return t.value=e.content,t}},comments:t}})),E=j({__name:"comment",props:["visible","id","type"],emits:"update:visible",setup(t,{emit:e}){L();const i=t,s=e,r=k(null),c=k([]);k([]),w((async()=>{var t,e;if(i.visible){if(null==(t=r.value)||t.open(),i.id){const t=await I(i.type,i.id);return c.value=t.comments,c}{const t=await A(i.type,i.id);return c.value=t.content,c}}null==(e=r.value)||e.close()}));const u=t=>{t.show||s("update:visible",!1)};return(t,e)=>{const i=B(l("uni-list-item"),z),s=B(l("uni-list"),P),p=B(l("uni-section"),$),h=f,m=B(l("uni-popup"),F);return o(),a(m,{ref_key:"popup",ref:r,type:"bottom","background-color":"#fff",onChange:u},{default:n((()=>[d(h,{class:"list"},{default:n((()=>[d(p,{class:"mb-10",title:"评论","sub-title":"最新",type:"line"},{default:n((()=>[d(s,null,{default:n((()=>[(o(!0),S(v,null,x(c.value,(t=>(o(),a(i,{key:t.commentId,"avatar-circle":!0,title:t.user.nickname,clickable:"",note:t.content,thumb:t.user.avatarUrl,time:t.timeStr,showArrow:"",ellipsis:""},null,8,["title","note","thumb","time"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},512)}}},[["__scopeId","data-v-b4dfff88"]]);export{E as C,L as u};
