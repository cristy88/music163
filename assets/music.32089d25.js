import{B as a,p as e,U as l,P as u}from"./index-56a3e0d1.js";import{n as s,o as n}from"./index.be3ddac0.js";const o=a("useMusicStore",(()=>{const a=e(0),o=l(),v=e(""),t=e(!0),c=e([]),i=e("");u((()=>i.value),(()=>{d(i.value.id)}));const d=async a=>{try{const e=await s(a);o.autoplay=!0,o.src=v.value=e.data[0].url}catch(e){console.log(e)}};d(a.value);return{curPlayList:c,setCurPlayList:(e,l)=>{const u=l.findIndex((a=>a.id===e.id));console.log("%c 点击歌曲下标","color:red",u),c.value=l,u>=0?(a.value=u,i.value=e):(a.value=0,i.value=c.value[0])},curPlayIndex:a,curMusic:i,isPlay:t,playing:()=>{o.paused?(o.play(),t.value=!0):(o.pause(),t.value=!1)},cutSong:e=>{a.value+=e,a.value<0?a.value=c.value.length-1:a.value>=c.value.length&&(a.value=0),i.value=c.value[a.value],d(a.value)},songDetail:d,addSong:async e=>{const l=c.value.findIndex((a=>a.id===e));if(l>-1)a.value=l;else{const l=await n(e);c.value.splice(a.value+1,0,l.songs[0]),d(l.songs[0].id),i.value=l.songs[0],a.value=a.value+1}},addToSongList:async e=>{const l=await n(e);c.value.splice(a.value+1,0,l.songs[0])}}}));export{o as u};
