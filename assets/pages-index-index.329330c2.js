import{p as s,r as e,o as a,c as l,w as o,a as t,j as c,t as n,e as r,F as i,x as u,d,k as m,g as f,y as _,S as p,z as g,A as y}from"./index-56a3e0d1.js";import{s as v,g as h,b as k,c as C,d as w}from"./index.be3ddac0.js";import{u as j}from"./userInfo.d663c960.js";import{_ as I}from"./uni-icons.f5ef22f9.js";import{r as S}from"./uni-app.es.615e6353.js";import{_ as b}from"./bofang.1ec52d0b.js";import{_ as x}from"./plugin-vueexport-helper.1b428a4d.js";const z=x({__name:"songSheet",props:["title","firstCommand","recommends"],setup(y){const v=s(0);return(s,h)=>{const k=m,C=S(e("uni-icons"),I),w=f,j=_,x=p,z=g;return a(),l(w,{class:"Play"},{default:o((()=>[t(w,{class:"Playtitle"},{default:o((()=>[t(w,{class:""},{default:o((()=>[t(k,null,{default:o((()=>[c(n(y.title),1)])),_:1}),t(C,{type:"right",size:"30"})])),_:1}),t(w,{class:""},{default:o((()=>[t(C,{type:"more-filled",size:"30"})])),_:1})])),_:1}),t(w,{class:"songs"},{default:o((()=>[y.firstCommand?(a(),l(w,{key:0,class:"firstAllSongSheet"},{default:o((()=>[t(z,{class:"swiper",circular:"",autoplay:!0,vertical:!0,current:v.value,onChange:h[0]||(h[0]=s=>v.value=s.detail.current)},{default:o((()=>[(a(!0),r(i,null,u(y.firstCommand,(s=>(a(),l(x,{key:s.id},{default:o((()=>[t(j,{src:s.picUrl},null,8,["src"])])),_:2},1024)))),128))])),_:1},8,["current"]),t(w,{class:"songsheetdesc"},{default:o((()=>{var s;return[c(n(null==(s=y.firstCommand[v.value])?void 0:s.name),1)]})),_:1})])),_:1})):d("",!0),y.recommends?(a(!0),r(i,{key:1},u(y.recommends,(s=>(a(),l(w,{class:"songsheet",key:s.id},{default:o((()=>[t(j,{src:s.picUrl,mode:"scaleToFill"},null,8,["src"]),t(w,{class:"songsheetdesc"},{default:o((()=>[c(n(s.name),1)])),_:2},1024),t(w,{class:"img"},{default:o((()=>[t(j,{src:b,mode:"scaleToFill"})])),_:1})])),_:2},1024)))),128)):d("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-9ea37abc"]]),U=x({__name:"HomeSearch",setup(r){const i=s(""),u=s(null);(async()=>{const s=await v();console.log("默认搜索",s),i.value=s.data.showKeyword})();return(s,r)=>{const d=S(e("uni-icons"),I),m=f;return a(),l(m,{class:"search"},{default:o((()=>[t(d,{type:"bars",size:"30"}),t(m,{class:"SearchCon",onClick:r[0]||(r[0]=s=>{y({url:`/pages/search/search?content=${encodeURIComponent(i.value)}`})})},{default:o((()=>[t(d,{type:"search",size:"26"}),t(m,{class:"searRight",ref_key:"Sear",ref:u},{default:o((()=>[c(n(i.value),1)])),_:1},512)])),_:1}),t(d,{type:"mic",size:"30"})])),_:1})}}},[["__scopeId","data-v-e552592c"]]),F=x({__name:"index",setup(e){const d=j();console.log("用户信息",d.profile,d.musicSum),d.profile&&d.musicSum||d.getUserInfo();const m=s([]),v=s([]),I=s([]),S=s([]);(async()=>{try{const s=await h();v.value=s.banners,console.log(s);const e=await k();console.log("获得icon",e),200===e.code&&(m.value=e.data)}catch(s){console.log(s)}})(),(async()=>{const s=await C();if(console.log("获得每日推荐歌单",s),200===s.code){const e=s.recommend.slice().sort((()=>Math.random()-.5));I.value=e.slice(0,5),S.value=e.slice(5)}})(),(async()=>{const s=await w();console.log("获得每日推荐歌曲",s)})();return(s,e)=>{const d=_,h=p,k=g,C=f;return a(),l(C,{class:"home"},{default:o((()=>[t(U),t(C,{class:"uni-margin-wrap"},{default:o((()=>[t(k,{class:"swiper",circular:"","indicator-dots":!0,"indicator-active-color":"#ffffff",autoplay:!0},{default:o((()=>[(a(!0),r(i,null,u(v.value,(s=>(a(),l(h,{key:s.targetId},{default:o((()=>[t(d,{src:s.imageUrl,mode:""},null,8,["src"])])),_:2},1024)))),128))])),_:1})])),_:1}),t(C,{class:"Icons"},{default:o((()=>[(a(!0),r(i,null,u(m.value,(s=>(a(),l(C,{class:"Icon",key:s.id,onClick:e=>(s=>{console.log("跳转到icon",s,"界面");let e="";"每日推荐"===s?e="/pages/daily/daily":"排行榜"===s&&(e="/pages/toplist/toplist"),console.log(e),y({url:e})})(s.name)},{default:o((()=>[t(d,{src:s.iconUrl,mode:""},null,8,["src"]),t(C,{class:"title"},{default:o((()=>[c(n(s.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),t(C,{class:"cart"},{default:o((()=>[t(C,{class:"img"},{default:o((()=>[t(d,{src:"",mode:""})])),_:1}),t(C,{class:"info"},{default:o((()=>[t(C,{class:"info_top"},{default:o((()=>[c("我喜欢的音乐")])),_:1}),t(C,{class:"info_buttom"})])),_:1}),t(C,{class:""})])),_:1}),t(z,{title:"推荐歌单",firstCommand:S.value,recommends:I.value},null,8,["firstCommand","recommends"])])),_:1})}}},[["__scopeId","data-v-6bbe3ca3"]]);export{F as default};
