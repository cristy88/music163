import{L as e,o as t,c as a,w as l,f as s,b as o,g as n,M as i,r as u,a as r,n as c,d,j as p,t as m,k as f,e as h,F as g,x as A,G as v,A as _,y as k,s as y,D as C,N as x,p as T,O as b,P as w,S,z as R,Q as I,I as D,J as B}from"./index-56a3e0d1.js";import{_ as F}from"./uni-icons.f5ef22f9.js";import{r as U,o as E}from"./uni-app.es.615e6353.js";import{_ as V}from"./plugin-vueexport-helper.1b428a4d.js";import{f as W,h as N,i as z,j as K,k as Q,s as H,m as M}from"./index.be3ddac0.js";import{u as Y}from"./music.32089d25.js";import{_ as L}from"./uni-popup.1aa6a8f8.js";import"./uni-popup.vuevuetypestyleindex0scopeda1518068lang.4ea77e47.js";const P=e=>"number"==typeof e?e+"px":e;const G=V({name:"UniNavBar",components:{statusBar:V({name:"UniStatusBar",data:()=>({statusBarHeight:e().statusBarHeight+"px"})},[["render",function(e,i,u,r,c,d){const p=n;return t(),a(p,{style:o({height:c.statusBarHeight}),class:"uni-status-bar"},{default:l((()=>[s(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])}],["__scopeId","data-v-0bfbbc2d"]])},emits:["clickLeft","clickRight","clickTitle"],props:{dark:{type:Boolean,default:!1},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:""},backgroundColor:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},height:{type:[Number,String],default:44},leftWidth:{type:[Number,String],default:60},rightWidth:{type:[Number,String],default:60},stat:{type:[Boolean,String],default:""}},computed:{themeBgColor(){return this.dark?this.backgroundColor?this.backgroundColor:this.dark?"#333":"#FFF":this.backgroundColor||"#FFF"},themeColor(){return this.dark?this.color?this.color:this.dark?"#fff":"#333":this.color||"#333"},navbarHeight(){return P(this.height)},leftIconWidth(){return P(this.leftWidth)},rightIconWidth(){return P(this.rightWidth)}},mounted(){uni.report&&this.stat&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft(){this.$emit("clickLeft")},onClickRight(){this.$emit("clickRight")},onClickTitle(){this.$emit("clickTitle")}}},[["render",function(e,h,g,A,v,_){const k=i("status-bar"),y=U(u("uni-icons"),F),C=n,x=f;return t(),a(C,{class:c(["uni-navbar",{"uni-dark":g.dark,"uni-nvue-fixed":g.fixed}])},{default:l((()=>[r(C,{class:c(["uni-navbar__content",{"uni-navbar--fixed":g.fixed,"uni-navbar--shadow":g.shadow,"uni-navbar--border":g.border}]),style:o({"background-color":_.themeBgColor,"border-bottom-color":_.themeColor})},{default:l((()=>[g.statusBar?(t(),a(k,{key:0})):d("",!0),r(C,{style:o({color:_.themeColor,backgroundColor:_.themeBgColor,height:_.navbarHeight}),class:"uni-navbar__header"},{default:l((()=>[r(C,{onClick:_.onClickLeft,class:"uni-navbar__header-btns uni-navbar__header-btns-left",style:o({width:_.leftIconWidth})},{default:l((()=>[s(e.$slots,"left",{},(()=>[g.leftIcon.length>0?(t(),a(C,{key:0,class:"uni-navbar__content_view"},{default:l((()=>[r(y,{color:_.themeColor,type:g.leftIcon,size:"20"},null,8,["color","type"])])),_:1})):d("",!0),g.leftText.length?(t(),a(C,{key:1,class:c([{"uni-navbar-btn-icon-left":!g.leftIcon.length>0},"uni-navbar-btn-text"])},{default:l((()=>[r(x,{style:o({color:_.themeColor,fontSize:"12px"})},{default:l((()=>[p(m(g.leftText),1)])),_:1},8,["style"])])),_:1},8,["class"])):d("",!0)]),!0)])),_:3},8,["onClick","style"]),r(C,{class:"uni-navbar__header-container",onClick:_.onClickTitle},{default:l((()=>[s(e.$slots,"default",{},(()=>[g.title.length>0?(t(),a(C,{key:0,class:"uni-navbar__header-container-inner"},{default:l((()=>[r(x,{class:"uni-nav-bar-text uni-ellipsis-1",style:o({color:_.themeColor})},{default:l((()=>[p(m(g.title),1)])),_:1},8,["style"])])),_:1})):d("",!0)]),!0)])),_:3},8,["onClick"]),r(C,{onClick:_.onClickRight,class:"uni-navbar__header-btns uni-navbar__header-btns-right",style:o({width:_.rightIconWidth})},{default:l((()=>[s(e.$slots,"right",{},(()=>[g.rightIcon.length?(t(),a(C,{key:0},{default:l((()=>[r(y,{color:_.themeColor,type:g.rightIcon,size:"22"},null,8,["color","type"])])),_:1})):d("",!0),g.rightText.length&&!g.rightIcon.length?(t(),a(C,{key:1,class:"uni-navbar-btn-text"},{default:l((()=>[r(x,{class:"uni-nav-bar-right-text",style:o({color:_.themeColor})},{default:l((()=>[p(m(g.rightText),1)])),_:1},8,["style"])])),_:1})):d("",!0)]),!0)])),_:3},8,["onClick","style"])])),_:3},8,["style"])])),_:3},8,["class","style"]),g.fixed?(t(),a(C,{key:0,class:"uni-navbar__placeholder"},{default:l((()=>[g.statusBar?(t(),a(k,{key:0})):d("",!0),r(C,{class:"uni-navbar__placeholder-view",style:o({height:_.navbarHeight})},null,8,["style"])])),_:1})):d("",!0)])),_:3},8,["class"])}],["__scopeId","data-v-d8073948"]]),O=V({__name:"SingleSong",props:["data","moreText"],emits:"toDetail",setup(e,{emit:s}){const o=Y();return(s,i)=>{const u=n;return t(),a(u,{class:"single"},{default:l((()=>[r(u,{class:"top"},{default:l((()=>[r(u,{class:"topTit"},{default:l((()=>[p("单曲")])),_:1}),r(u,{class:"topAll"},{default:l((()=>[r(u,{class:"allPlayer"}),r(u,{class:"all"},{default:l((()=>[p("播放全部")])),_:1})])),_:1})])),_:1}),(t(!0),h(g,null,A(e.data,(e=>(t(),a(u,{class:"allSongs",key:e.id,onClick:t=>{return a=e.id,o.addSong(a),void _({url:"/pages/player/player"});var a}},{default:l((()=>[r(u,{class:"songs"},{default:l((()=>[r(u,{class:"songName"},{default:l((()=>[p(m(null==e?void 0:e.name),1)])),_:2},1024),r(u,{class:"songZj"},{default:l((()=>{var t;return[r(u,{class:"zj"},{default:l((()=>[p("专辑")])),_:1}),p(m(null==(t=e.al)?void 0:t.name),1)]})),_:2},1024),r(u,{class:"songSinger"},{default:l((()=>{var t;return[r(u,{class:"singer"},{default:l((()=>[p("歌手")])),_:1}),p(m(e.al&&(null==(t=e.ar[0])?void 0:t.name)),1)]})),_:2},1024)])),_:2},1024),r(u,{class:"icons"},{default:l((()=>[r(u,{class:"sPlayer",onClick:v((t=>{return a=e.id,o.addToSongList(a),void console.log("添加到播放列表");var a}),["stop"])},null,8,["onClick"]),r(u,{class:"point"})])),_:2},1024)])),_:2},1032,["onClick"])))),128)),e.moreText?(t(),a(u,{key:0,class:"much",onClick:i[0]||(i[0]=e=>s.$emit("toDetail",1))},{default:l((()=>[p(m(e.moreText)+" >",1)])),_:1})):d("",!0)])),_:1})}}},[["__scopeId","data-v-dcdb9675"]]),q=V({__name:"Album",props:["dataAlbum","moreText"],emits:["toDetail"],setup(e,{emit:s}){const o=e;console.log(o.dataAlbum);const i=e=>{(async e=>{const t=await W(e);console.log(t)})(e)};return(s,o)=>{const u=n,c=k;return t(),a(u,{class:"album"},{default:l((()=>[r(u,{class:"top"},{default:l((()=>[p("专辑")])),_:1}),(t(!0),h(g,null,A(e.dataAlbum,(e=>(t(),a(u,{class:"lists",key:e.id,onClick:t=>i(e.id)},{default:l((()=>[r(c,{src:e.picUrl,mode:"widthFix"},null,8,["src"]),r(u,{class:"list"},{default:l((()=>[r(u,{class:"list-tit"},{default:l((()=>[p(m(e.name),1)])),_:2},1024),r(u,{class:"list-small"},{default:l((()=>[p(m(e.artist.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),e.moreText?(t(),a(u,{key:0,class:"much",onClick:o[0]||(o[0]=e=>s.$emit("toDetail",6))},{default:l((()=>[p(m(e.moreText)+" >",1)])),_:1})):d("",!0)])),_:1})}}},[["__scopeId","data-v-b911743a"]]),J=V({__name:"ResSongSheet",props:["dataRes","moreText"],emits:["toDetail"],setup:(e,{emit:s})=>(s,o)=>{const i=n,u=k;return t(),a(i,{class:"resSong"},{default:l((()=>[r(i,{class:"top"},{default:l((()=>[p("歌单")])),_:1}),(t(!0),h(g,null,A(e.dataRes,(e=>(t(),a(i,{class:"list",key:e.id},{default:l((()=>[r(u,{src:e.coverImgUrl,mode:"widthFix"},null,8,["src"]),r(i,{class:"list-con"},{default:l((()=>[r(i,{class:"name"},{default:l((()=>[p(m(e.name),1)])),_:2},1024),r(i,{class:"list-num"},{default:l((()=>[r(i,{class:"num"},{default:l((()=>[p("共 "+m(e.trackCount)+"首",1)])),_:2},1024)])),_:2},1024),r(i,{class:"songName"},{default:l((()=>[p("包含"),r(i,{class:"song"},{default:l((()=>[p("《"+m(e.track.name)+"》",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),e.moreText?(t(),a(i,{key:0,class:"much",onClick:o[0]||(o[0]=e=>s.$emit("toDetail",2))},{default:l((()=>[p(">"+m(e.moreText)+" >",1)])),_:1})):d("",!0)])),_:1})}},[["__scopeId","data-v-cab9a64f"]]),X=()=>({carePerson:async(e,t)=>{const a=await N(e,t);console.log(a),200===a.code?y({icon:"success",title:1===t?"添加成功":"删除成功"}):y({icon:"error",title:a.message})}}),j=V({__name:"Artist",props:["dataArt","moreText"],emits:["toDetail"],setup(e,{emit:s}){const o=e,i=X();return console.log("歌手",o.dataArt),(s,o)=>{const c=n,v=k,_=U(u("uni-icons"),F),y=f;return t(),a(c,{class:"art"},{default:l((()=>[r(c,{class:"top"},{default:l((()=>[p("艺人")])),_:1}),(t(!0),h(g,null,A(e.dataArt,(e=>(t(),a(c,{class:"artList",key:e.id},{default:l((()=>[r(c,{class:"list"},{default:l((()=>[r(v,{src:e.picUrl},null,8,["src"]),r(c,{class:"list-tit"},{default:l((()=>[r(c,{class:"name"},{default:l((()=>[p(m(e.name),1)])),_:2},1024),r(c,{class:"nums"},{default:l((()=>[p("粉丝："),r(c,{class:"num"},{default:l((()=>[p(m(e.albumSize)+"万",1)])),_:2},1024)])),_:2},1024),r(c,{class:"TA"})])),_:2},1024)])),_:2},1024),e.followed?(t(),a(c,{key:1,class:"GZ isCare",onClick:t=>C(i).carePerson(e.id,0)},{default:l((()=>[r(_,{type:"checkmarkempty",size:"12"}),r(y,null,{default:l((()=>[p("已关注")])),_:1})])),_:2},1032,["onClick"])):(t(),a(c,{key:0,class:"GZ",onClick:t=>C(i).carePerson(e.id,1)},{default:l((()=>[p("+ 关注")])),_:2},1032,["onClick"]))])),_:2},1024)))),128)),e.moreText?(t(),a(c,{key:0,class:"much",onClick:o[0]||(o[0]=e=>s.$emit("toDetail",4))},{default:l((()=>[p(m(e.moreText),1)])),_:1})):d("",!0)])),_:1})}}},[["__scopeId","data-v-ec81f596"]]),Z=V({__name:"User",props:["dataUser","moreText"],emits:["toDetail"],setup(e,{emit:s}){const o=e,i=X(),c=(e,t)=>{console.log("用户id",e),i.carePerson(e,t)};return console.log("用户",o.dataUser),(s,o)=>{const i=n,v=k,_=U(u("uni-icons"),F),y=f;return t(),a(i,{class:"user"},{default:l((()=>[r(i,{class:"top"},{default:l((()=>[p("用户")])),_:1}),(t(!0),h(g,null,A(e.dataUser,(e=>(t(),a(i,{class:"list",key:e.userId},{default:l((()=>[r(i,{class:"list-user"},{default:l((()=>[r(v,{src:e.avatarUrl,mode:"widthFix"},null,8,["src"]),r(i,{class:"name"},{default:l((()=>[p(m(e.nickname),1)])),_:2},1024)])),_:2},1024),e.followed?(t(),a(i,{key:1,class:"GZ isCare"},{default:l((()=>[r(_,{type:"checkmarkempty",size:"12",onClick:t=>c(e.userId,2)},null,8,["onClick"]),r(y,null,{default:l((()=>[p("已关注")])),_:1})])),_:2},1024)):(t(),a(i,{key:0,class:"GZ",onClick:t=>c(e.userId,1)},{default:l((()=>[p("+ 关注")])),_:2},1032,["onClick"]))])),_:2},1024)))),128)),e.moreText?(t(),a(i,{key:0,class:"much",onClick:o[0]||(o[0]=e=>s.$emit("toDetail",7))},{default:l((()=>[p(m(e.moreText)+" >",1)])),_:1})):d("",!0)])),_:1})}}},[["__scopeId","data-v-fc3990e6"]]),$=V({__name:"Video",props:["data","moreText"],emits:["toDetail"],setup(e,{emit:s}){const o=e;console.log("视频数据",o.data);const i=e=>String(e)[1]?e:"0"+e,u=x((()=>{var e;return null==(e=o.data)?void 0:e.map((e=>{const t=i(Math.floor(e.durationms/1e3/60)),a=i(Math.floor(e.durationms/1e3-60*t));let l=e.playTime;return e.playTime>1e4&&(l=(e.playTime/1e4).toFixed(1)+"万"),e.playTime>1e8&&(l=(e.playTime/1e8).toFixed(1)+"亿"),{anytime:`${t}:${a}`,num:l}}))}));return(s,o)=>{const i=k,c=n,v=f;return t(),a(c,{class:"video"},{default:l((()=>[r(c,{class:"videoCon"},{default:l((()=>[(t(!0),h(g,null,A(e.data,((e,s)=>(t(),a(c,{class:"videoLi",key:e.vid,onClick:t=>{return a=e.vid,console.log("播放视频的id",a),void _({url:`/pages/mvplayer/mvplayer?id=${a}`});var a}},{default:l((()=>[r(c,{class:"img"},{default:l((()=>[r(i,{src:e.coverUrl,mode:"widthFix"},null,8,["src"]),r(c,{class:"time"},{default:l((()=>{var e;return[p(m(null==(e=u.value[s])?void 0:e.anytime),1)]})),_:2},1024)])),_:2},1024),r(c,{class:"Con"},{default:l((()=>[r(c,{class:"title"},{default:l((()=>[p(m(e.title),1)])),_:2},1024),r(c,{class:"videoUser"},{default:l((()=>[(t(!0),h(g,null,A(e.creator,(e=>(t(),a(c,{key:s},{default:l((()=>[p(m(e.userName),1)])),_:2},1024)))),128))])),_:2},1024),r(c,{class:"bofang"},{default:l((()=>[r(v,null,{default:l((()=>{var e;return[p(m(null==(e=u.value[s])?void 0:e.num),1)]})),_:2},1024),p("播放 ")])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),e.moreText?(t(),a(c,{key:0,class:"much",onClick:o[0]||(o[0]=e=>s.$emit("toDetail",3))},{default:l((()=>[p(m(e.moreText)+" >",1)])),_:1})):d("",!0)])),_:1})}}},[["__scopeId","data-v-ca5f098b"]]),ee=V({__name:"SearResUI",props:["data","name","numId","moreText"],emits:["toDetail","scrollDown"],setup(e,{emit:s}){const o=e,i=s;T(null);const u=()=>{console.log(o.name,"滚动到底了"),i("scrollDown",o.name)},c=e=>{i("toDetail",e)};return(s,o)=>{const i=n,f=b;return t(),a(f,{class:"Refres","scroll-x":!1,"scroll-y":!0,onScrolltolower:u},{default:l((()=>["单曲"===e.name||"song"===e.name?(t(),a(i,{key:0,class:""},{default:l((()=>[r(O,{data:e.data,moreText:e.moreText,onToDetail:c},null,8,["data","moreText"])])),_:1})):d("",!0),"歌单"===e.name||"playList"===e.name?(t(),a(i,{key:1,class:""},{default:l((()=>[r(J,{dataRes:e.data,moreText:e.moreText,onToDetail:c},null,8,["dataRes","moreText"])])),_:1})):d("",!0),"视频"===e.name?(t(),a(i,{key:2,class:""},{default:l((()=>[r($,{data:e.data,moreText:e.moreText,onToDetail:c},null,8,["data","moreText"])])),_:1})):d("",!0),"歌手"===e.name||"aitist"===e.name?(t(),a(i,{key:3,class:""},{default:l((()=>[r(j,{dataArt:e.data,moreText:e.moreText,onToDetail:c},null,8,["dataArt","moreText"])])),_:1})):d("",!0),"歌词"===e.name?(t(),a(i,{key:4,class:""},{default:l((()=>[p(m(e.data),1)])),_:1})):d("",!0),"专辑"===e.name||"album"===e.name?(t(),a(i,{key:5,class:""},{default:l((()=>[r(q,{dataAlbum:e.data,moreText:e.moreText,onToDetail:c},null,8,["dataAlbum","moreText"])])),_:1})):d("",!0),"用户"===e.name||"user"===e.name?(t(),a(i,{key:6,class:""},{default:l((()=>[r(Z,{dataUser:e.data,moreText:e.moreText,onToDetail:c},null,8,["dataUser","moreText"])])),_:1})):d("",!0)])),_:1})}}},[["__scopeId","data-v-4d1e79b8"]]),te=V({__name:"SearchResData",props:["trueSearCon","showRes"],setup(e){const s=T([{name:"单曲",hasMore:!1,nickName:"songs",id:1,offset:0,resData:[]},{name:"歌单",hasMore:!1,nickName:"playlists",id:1e3,offset:0,resData:[]},{name:"视频",hasMore:!1,nickName:"videos",id:1014,offset:0,resData:[]},{name:"歌手",hasMore:!1,nickName:"artists",id:100,offset:0,resData:[]},{name:"歌词",hasMore:!1,nickName:"songs",id:1006,offset:0,resData:[]},{name:"专辑",hasMore:!1,nickName:"albums",id:10,offset:0,resData:[]},{name:"用户",hasMore:!1,nickName:"userprofiles",id:1002,offset:0,resData:[]}]),o=[{name:"综合",id:1018},{name:"单曲",id:1},{name:"歌单",id:1e3},{name:"视频",id:1014},{name:"歌手",id:1e3},{name:"歌词",id:1006},{name:"专辑",id:10},{name:"用户",id:1002}],i=e;console.log(i.showRes);const u=T(i.showRes||0),d=T(0),v=T([]),_=async(e,t=30)=>{const a=s.value[e-1];console.log("id",a.id,a.offset);const l=await z(i.trueSearCon,a.id,a.offset*t);s.value[e-1].resData=[...s.value[e-1].resData,...l.result[a.nickName]],s.value[e-1].hasMore=l.result.hasMore,console.log(l.result)},k=e=>{const t=s.value.findIndex((t=>t.name===e));console.log("执行函数",t),s.value[t].hasMore&&(s.value[t].offset+=1,_(t+1))};w(u,(()=>{let e=u.value;console.log(e),e>0&&0===s.value[e-1].resData.length&&_(e),d.value=0,d.value=60*(e-2)}));const y=e=>{u.value=e};return(async e=>{const t=await z(i.trueSearCon,e);console.log("搜索结果",t),v.value=t.result})(),(e,i)=>{const _=f,C=n,x=b,T=S,w=R;return t(),a(C,{class:"searRes"},{default:l((()=>[r(x,{class:"top-menu-view","scroll-x":"true","scroll-with-animation":"","scroll-left":d.value},{default:l((()=>[(t(),h(g,null,A(o,((e,t)=>r(C,{class:"menu-topic-view",id:e.id,key:e.id,onClick:e=>(e=>{u.value=e})(t)},{default:l((()=>[r(C,{class:c(u.value==t?"menu-topic-act":"menu-topic")},{default:l((()=>[r(_,{class:"menu-topic-text"},{default:l((()=>[p(m(e.name),1)])),_:2},1024),r(C,{class:"menu-topic-bottom"},{default:l((()=>[r(C,{class:"menu-topic-bottom-color"})])),_:1})])),_:2},1032,["class"])])),_:2},1032,["id","onClick"]))),64))])),_:1},8,["scroll-left"]),r(w,{class:"swiper-box-list",current:u.value,onChange:i[0]||(i[0]=e=>(e=>{u.value=e.detail.current})(e))},{default:l((()=>[r(T,{class:"swiper-topic-list"},{default:l((()=>[r(C,{class:"swiper-item allRound"},{default:l((()=>[(t(!0),h(g,null,A(v.value.order,((e,s)=>(t(),a(C,{key:s},{default:l((()=>[r(ee,{data:v.value[e][`${e}s`],name:e,moreText:v.value[e].moreText,onToDetail:y},null,8,["data","name","moreText"])])),_:2},1024)))),128))])),_:1})])),_:1}),(t(!0),h(g,null,A(s.value,((e,s)=>(t(),a(T,{class:"swiper-topic-list",key:e.id},{default:l((()=>[r(C,{class:"swiper-item"},{default:l((()=>[r(ee,{data:e.resData,name:e.name,moreText:!1,onToDetail:y,onScrollDown:k},null,8,["data","name"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["current"])])),_:1})}}},[["__scopeId","data-v-1a3ebb77"]]),ae={data:()=>({}),created(){this.popup=this.getParent()},methods:{getParent(e="uniPopup"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t}}},le={en:{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"},"zh-Hans":{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"},"zh-Hant":{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}},{t:se}=I(le);const oe=V({name:"uniPopupDialog",mixins:[ae],emits:["confirm","close"],props:{inputType:{type:String,default:"text"},value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""}},data:()=>({dialogType:"error",focus:!1,val:""}),computed:{okText(){return this.confirmText||se("uni-popup.ok")},closeText(){return this.cancelText||se("uni-popup.cancel")},placeholderText(){return this.placeholder||se("uni-popup.placeholder")},titleText(){return this.title||se("uni-popup.title")}},watch:{type(e){this.dialogType=e},mode(e){"input"===e&&(this.dialogType="info")},value(e){this.val=e}},created(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted(){this.focus=!0},methods:{onOk(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog(){this.$emit("close"),this.beforeClose||this.popup.close()},close(){this.popup.close()}}},[["render",function(e,o,i,u,d,h){const g=f,A=n,v=D;return t(),a(A,{class:"uni-popup-dialog"},{default:l((()=>[r(A,{class:"uni-dialog-title"},{default:l((()=>[r(g,{class:c(["uni-dialog-title-text",["uni-popup__"+d.dialogType]])},{default:l((()=>[p(m(h.titleText),1)])),_:1},8,["class"])])),_:1}),"base"===i.mode?(t(),a(A,{key:0,class:"uni-dialog-content"},{default:l((()=>[s(e.$slots,"default",{},(()=>[r(g,{class:"uni-dialog-content-text"},{default:l((()=>[p(m(i.content),1)])),_:1})]),!0)])),_:3})):(t(),a(A,{key:1,class:"uni-dialog-content"},{default:l((()=>[s(e.$slots,"default",{},(()=>[r(v,{class:"uni-dialog-input",modelValue:d.val,"onUpdate:modelValue":o[0]||(o[0]=e=>d.val=e),type:i.inputType,placeholder:h.placeholderText,focus:d.focus},null,8,["modelValue","type","placeholder","focus"])]),!0)])),_:3})),r(A,{class:"uni-dialog-button-group"},{default:l((()=>[r(A,{class:"uni-dialog-button",onClick:h.closeDialog},{default:l((()=>[r(g,{class:"uni-dialog-button-text"},{default:l((()=>[p(m(h.closeText),1)])),_:1})])),_:1},8,["onClick"]),r(A,{class:"uni-dialog-button uni-border-left",onClick:h.onOk},{default:l((()=>[r(g,{class:"uni-dialog-button-text uni-button-color"},{default:l((()=>[p(m(h.okText),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:3})}],["__scopeId","data-v-b888b3dc"]]),ne=V({__name:"originUI",props:["hisData"],emits:["clickTab","clearhisData"],setup(e,{emit:s}){const o=s,i=T([]);T([]),(async()=>{try{const e=await Q();i.value=e.data}catch(e){}})(),(async()=>{try{await K()}catch(e){}})();const v=T(null),_=()=>{v.value.open()},y=()=>{v.value.close()},C=()=>{o("clearhisData"),v.value.close()};return(s,o)=>{const x=f,T=U(u("uni-icons"),F),b=n,w=k,S=U(u("uni-popup-dialog"),oe),R=U(u("uni-popup"),L);return t(),a(b,{class:"searOrigin"},{default:l((()=>[e.hisData.length>0?(t(),a(b,{key:0,class:"his"},{default:l((()=>[r(b,{class:"hisTitle"},{default:l((()=>[r(x,null,{default:l((()=>[p("搜索历史")])),_:1}),r(T,{type:"trash",size:"20",onClick:_})])),_:1}),r(b,{class:"hisCon"},{default:l((()=>[(t(!0),h(g,null,A(e.hisData,(e=>(t(),a(b,{key:e,onClick:t=>s.$emit("clickTab",e)},{default:l((()=>[r(b,{class:""},{default:l((()=>[p(m(e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):d("",!0),r(b,{class:"topList"},{default:l((()=>[r(b,{class:"toplistCon"},{default:l((()=>[r(b,{class:"title"},{default:l((()=>[p(" 热搜榜 ")])),_:1}),(t(!0),h(g,null,A(i.value,((e,o)=>(t(),a(b,{class:"li",key:e.score,onClick:t=>s.$emit("clickTab",e.searchWord)},{default:l((()=>[r(x,{class:c(["act",{active:o<3}])},{default:l((()=>[p(m(o+1),1)])),_:2},1032,["class"]),p(),r(x,{class:"liSear"},{default:l((()=>[p(m(e.searchWord),1)])),_:2},1024),r(w,{src:e.iconUrl,mode:""},null,8,["src"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),r(R,{ref_key:"popup",ref:v,type:"dialog"},{default:l((()=>[r(S,{message:"",title:"确定要删除历史信息吗",duration:10,"before-close":!0,onClose:y,onConfirm:C})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-82d77df1"]]),ie=V({__name:"search",setup(e){const s=T(""),o=T(""),i=T(!1),c=T(0),v=T([]),_=T([]),y=T([]),C=T([]),x=T(!1),b=T(null),w=T(0);E((e=>{(async()=>{const t=await H();s.value=decodeURIComponent(e.content)||t.data.showKeyword})()}));const S=async()=>{c.value=2,i.value=!0,y.value=0===o.value.length?s.value:o.value,o.value=y.value,v.value.find((e=>e===o.value))||v.value.push(o.value)},R=()=>{B()},I=e=>{console.log(e.detail.value),o.value=e.detail.value,e.detail.value.length>0?(i.value=!0,c.value=1,clearTimeout(b.value),b.value=setTimeout((async()=>{_.value=v.value.filter((t=>t.includes(e.detail.value.length)));const t=await M(e.detail.value);if(console.log("搜索结果",t),200===t.code){const e=t.result.order;e?(C.value=e.map((e=>t.result[e])).flat(!0),x.value=!1):C.value=[],0===C.value.length&&0===_.value.length&&(x.value=!0),_.value.length>0&&(x.value=!0)}}),500)):(i.value=!1,c.value=0)},V=()=>{o.value="",i.value=!1,c.value=0},W=e=>{o.value=e,S()},N=()=>{v.value=[]};return(e,T)=>{const b=U(u("uni-icons"),F),B=D,E=n,z=U(u("uni-nav-bar"),G),K=k,Q=f;return t(),a(E,{class:"xxSearch"},{default:l((()=>[r(E,{class:"box-bg"},{default:l((()=>[r(z,{border:!1,backgroundColor:"#F8F9FD","left-icon":"arrow-left",onClickLeft:R,"right-text":"搜索",onClickRight:S},{default:l((()=>[r(E,{class:"input-view"},{default:l((()=>[r(b,{class:"input-uni-icon",type:"search",size:"18",color:"#999"}),r(B,{"confirm-type":"search",focus:"",class:"nav-bar-input",type:"text",placeholder:s.value,onConfirm:S,value:o.value,onInput:I},null,8,["placeholder","value"]),i.value?(t(),a(b,{key:0,class:"uni-icon",onClick:V,type:"close",size:"14"})):d("",!0)])),_:1})])),_:1})])),_:1}),0===c.value?(t(),a(E,{key:0,class:"searchBottom"},{default:l((()=>[r(E,{class:"",onClick:T[0]||(T[0]=e=>{console.log("跳去歌手页面")})},{default:l((()=>[r(K,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA21JREFUWEelljtoVEEUhv8zs5vWd+ELBCGCNkLUJHtnJcFo4QMtLKKiqIiNhfgAEQtNYyEqIlgIvlAxNiLGR2MkwTuzJtHCxoA2Cr4Kn+kku3eOuUkWrvHunbu7Cxd2Z/7zzzdn7jmzhCo/f3K5xVmSaxm8TgAzyuEWfFv++nWLhodHq7GkasQlpfYS42pCzEcmnMhofSutb2qAwPOOA3Q6lTHjiCzo82m0qQBKrfktJPh+GsOyhpm2Zgr+PVeME4Db2qZzsdTHwHKXWXSeAT9j9GpXjBsgl++0xN0uo7h5Ad5MxvQkxToBijl1ShBO1gIApmOy4J+pC8B6qoeBTbUAMKM7U9Db6wIIvPxtgHfUAoCwNxizs16A0wAfrxHgkDTmQl0ArFSTZbyqBUCA15ExT+sCCIODnLoMwv7qIOiCNP4hV4yzCsoGgee9B2iRyzCcJ+A1ZTPt1N//26VPDTCeCU+FR9GUZMqgHhkUD9LAwAfX4pOwaWQTGm5pWWSlPAnQ7vgoviGCoCvt4qkBRlvzq6TgAwB2lRe2jK5MQ+ZK+Ls0Wto3pVndDCxdanjhD7m25zyCkuetJ9DjqJEgbCKtH0XHWKmNlvHwnzHwhowxT2qugmLr6pwU9gEDs8smBHwRRs+PM7We+szAvIj2e2DF5uyL54VKEBUzwPn8XGu5D8CSaDAB/cLo9goA4a3ZNmXurRDUTr7/NS6mIkDSJRQQWhq0HowajirVLBkDsWCMrmxBn0oNEO6eLb+KpnPK2b4cO9tV0bGxd2Vo7F1ZWWGRLyRoRVwWYjPgvIIZsbsZ60Dx4wDCqonLQixA4HnXK9f6xB4FizXR3Vqyz5JLjm9IY/ZM1cQCWE9pBrxEQ8JRqfW5UBModQSMs45yM8JolRbgW7T04oyjfzZKOXWHCNscAN+F0XNSAQSe+gFgpqOLvZNGj5do4Km3ABod+p/S6FmpAKxSg8z45y2PMxc0AWkZPx2LgwhDQuvmVADOKph0YXBn+JVAd10AVVXBZBcMG83CRGPGRQiUwDjsAPgoBDWn7gOhWVGpNsEIW3HFDwFvwkkGliXpLKE9q3V/nCbxNuR8fmlg+RoB/52dK+WTYINS0F7y/eFKeud1PG6kVKMFOojRAdACgKcBKD+hZGTioRGAPzGhVwC9pPU7F+hfB9NLMElZYdcAAAAASUVORK5CYII="}),r(Q,null,{default:l((()=>[p("歌手")])),_:1})])),_:1}),r(E,{class:"",onClick:T[1]||(T[1]=e=>{console.log("跳去曲风页面")})},{default:l((()=>[r(K,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAApJJREFUWEftVz1oE2EYfp7vGhdRHARxcxBERVsMqLnvO4gg+DO5VCdBES2OLi5ddBF0cBNUBMVJKk7i0EEayOW0VYgtIoKDmw7WpQqF5u575QtejfFSkvTSoRjI8OXee57n3vfN875HAIi1vqDA8wJodx7w5weBWQrvMKo+YcOYshJMDZg0E17Ai7Q6iARSSiNITCYWrwchyCOOCXB4mQuoMNFG0h8SSGlDrTYQ8pQj9v1zpHrozmwT8NGrhbsH8eTtmInWnwHu+EuAO6haeGQtBFhtpgQorx8BEgTbIVK0Ai2AofsKnqooPJ2V0VVnQIwpWqAIiyIUShDsyyLyaiFzFSBab7Kg84ziCr2ySPCdALNerXo5VwEdTOubEC9pWbe09cVCob65UplfqZn7LkGrACu4PuRxgtXqh17/ObkJKEThtSzy2JhRWhz1onBsYCVwGcgSkD6dI869CdtL8F9AawbcTkHhARJ7nM2uaQmsbyaEGG1vuNx6QIJgv7X2JKBGADnjiNImTPzgKig3B+aEcSk4RSV3AWxrJVkWoPUngDvbBaw0Xbv2gYVyeevGRhwC2NVOkAqw2rwXYG+n66vygcSYSxDcywSxPF54VZ1smo7gPoAtv7ecL1bs+FAUPerkkF1nIPbNWRKP/wWSuorjMqenF9y1Jd8f8ZTy3YKtyOesVr/mNgsSHdwG5MqfRVKesdEY48zM915nQBrfdQbSG5aMOUSLE/0On3/6Y92tZL2WolMJ5lQtHO4VrJ/4TAEOSIk9yCh60w9ot/e0TtTmWm61CVtfSkm8SCzedgvYS5ynMCzSHFRNzwBxi80pBj7oBSiPWALzhLgVHnBp8YQ3Wl9S8yDpgPFTiDkBxgthWPkFG7oFLTX/4ggAAAAASUVORK5CYII="}),r(Q,null,{default:l((()=>[p("曲风")])),_:1})])),_:1}),r(E,{class:"",onClick:T[2]||(T[2]=e=>{console.log("跳去专区")})},{default:l((()=>[r(K,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA/lJREFUWEe1V11oHFUYPd+dHStIlFQRKsUH8Y/4IFFscO8d2Foi2FJLH6y/FCsWwQcxRn1tfZQEax/6EIvog60thT5EJCpC187MJvQlRQQVMfhURWm1VYJ0d+6RO8mE6WY2u2M3+7R773e/78z5zvnurOA6PwyCbYnlXgH2AvzYi+N9ZVJKmeAsllobC9kB4gUINudzeHFUKmep4KRqDojIDoKP5IsK8DeBAbe2LgAWR2qbb6wkUwS3X1NY8I0Ax1sWdyjBgXUD0NL6hECeXi7+O8CTSqmTEoaxW2tWzcF1A8ChoRvs4MYrADY4kSlrx2V29lKeiaRqJiEYB/CbF0ebyuiqqwaaxtQUccYltYKtfhTV8wVozAiJDwk8YCGTfhy+te4AqPVWCzUq4OMEHl4u+K8V7Paj6ItOAFirVXA12UXBS05PAnxWigEQh0UwSmCorciPFtzvx3FYVLxZrT6mxNsJYB/AW9octDZh+Ra0RwrkK8KeXlTq9EAY/tG+n4oT2AnBQ217TkMb3Vo5BtwJ4icAx5QnH0gY/loEv6X1Ewoy4XSR278EyAxhZ0i5J3NNKQBFIiwEUDVfi2Db0p4cc0U9a2cy9+Rt23cADIJN1vLCcvE3vDg81A4y0cEhgK872/YdwFq2pTEPtix2Z/Q7264AWDooLwN8fgkxf4HInAKmLXG80xxYJbyCuUFj7iUxSSfIlQ8vW5FnUgBXjRnxiLluA6QXDRQx0O4kEl8mVo1tmDv7vVDr7RbyeVbcEu9k3zOqVvYKJmEvDLiYJeHJZctkzm80ZrNzkmh9FHDUF4/aRBv2A0AndsVq853zKyHTlTjctUqx1eBtCN+9Hg2s1VrJntBR7zeig71S2ilpt8ur/ZxYHTQIPirEKdWI9hR4dgzge25d+ZVBqdf/ysfQmEEAdwH4U6JooTSApGqOQPBqajzBnkoUncoXyBgS4LyKo+Fsr6n1qEfZT8FTufhvITgCYqrXlkm7RVwrhHJelL0bkImcb8e8OH7f/U6MGQcx2Q/bpnOgW0ISn1Ya0XMpSznbCnAhIY5Coa4ow8tDLHs/KHyBWaWBFUqNqXkU1+/7AdwJwF2ZC5YyVWmEn2RxidYfAfIigEVllZHZs/P5pFabiIDuuQXdaFwtSvMDgPs6iZbGvGaJw+sJIB1M/bJt19uwnQGrzRkCNQFmVBxd8z/Bxebv+ot+ZeD2ev2fNQdR+RYEEwDfTOcC5VlphCfyOsreoCloVKIo1UJfAVyp1W67qdn6GcDNqSsg0yTnRWRYwCezYr3cnC62dAtSmoNAK8uo05P1Wvx/A0iffMuWW+n7U4TzfzqKFwScl2bzFTl37mI36rP9/wBTdS1GAR9OugAAAABJRU5ErkJggg=="}),r(Q,null,{default:l((()=>[p("专区")])),_:1})])),_:1}),r(E,{class:""},{default:l((()=>[r(K,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAp5JREFUWEftlTtoFUEUhv9/5l5NFRAbrYL4ABUFmzx250o0WGgRsUmhNgo2PsFHYRpjoTaxiTZRIYWCkMbOQvHFzq6JIIKPFCZEK5EICinN7pywMVdvQnLvXS/hImbLnTnnfPPPmf8Qdf5Y5/r4NwGkUOhwiXSBsntGQeFTpTnIIHiSVdHMCkx5pkcRlxYq5ASX85HtyQKRCUAKhS3OyUsAjQI8EKd602JU7jyBAwAmlWIbg2CkWohMAInv9wE8BcgNHYanS4uUWysHkxVgFOCGhGhdYe1waeKfxrRowRAgYzoMNy6RAkbSxDq0C4Infvn1haAyKrAMsKxAHRRwvnkvghc6sicqdXnpeuKZXqHs1ORhWvtxsWdZ9hWI5zU5qs8k3ilrtzvfDAnQosR5jKLUEX9/4nltjioiMKxC2+qMeSuCbYpYT2vH/wogDXLGjIhgs0ridU7lToI4B8g1HYbd85zwKsCLEFxXLr7pdO4TwTEVBmVNqaIPJMbcguAYIBdUHN91ufzX1PMFeEXh41/DUPYQaE5nhIqn1rh8fj8E/SAGtLVHa7Li2Pf3EnxYdMB0IImTQQG2liYm8IGKXekgKvaCUjQMgrAmgDQ48Qv3ADlEwPLH9w40NdFNTh4B4M8mD1Vj4wAmJrRraLAAdyjiDK3tqzQTKl5BMUHxVAS+OOFxrRExCL7NXEFz8+okt7KdlNsAVpWbF/OBqgaYVaIbkCt/Wh+jVIjTJi35d19H9mClkxfXMwGkQbHv7yPYSaBTgLXpPwLjArmjRF4zih5VW3w2Nsv2uXsrGVM1mTMrMPftZ5//NfXA/OD/TwHnm2cCtFcwlucqtLuquf/MTZh4pp/EpnLJBfJGh+HZJQGoNmmWfTW9giyFFttbd4BpJjQzMFax/u8AAAAASUVORK5CYII="}),r(Q,null,{default:l((()=>[p("识曲")])),_:1})])),_:1})])),_:1})):d("",!0),r(E,{class:"search"},{default:l((()=>[0===c.value?(t(),a(ne,{key:0,hisData:v.value,onClickTab:W,onClearhisData:N},null,8,["hisData"])):d("",!0),1===c.value?(t(),a(E,{key:1,class:"TimeRes"},{default:l((()=>[x.value?(t(),a(E,{key:0,class:"Empty"},{default:l((()=>[p(" 正在搜索 “"+m(o.value)+"” ",1)])),_:1})):d("",!0),(t(!0),h(g,null,A(_.value,(e=>(t(),a(E,{class:"TimeResCon",key:e,onClick:t=>W(e.name)},{default:l((()=>[r(E,null,{default:l((()=>[r(b,{type:"medal",size:"30"}),r(E,{class:"TimeRR"},{default:l((()=>[p(m(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(t(!0),h(g,null,A(C.value,(e=>(t(),a(E,{class:"TimeResCon",key:e.id,onClick:t=>W(e.name)},{default:l((()=>[r(E,{class:""},{default:l((()=>[r(b,{type:"search",size:"30"}),r(E,{class:"TimeRR"},{default:l((()=>[p(m(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):d("",!0),2===c.value?(t(),a(te,{key:2,trueSearCon:y.value,showRes:w.value},null,8,["trueSearCon","showRes"])):d("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-161fe59b"]]);export{ie as default};
