import{p as a,T as l,o as s,c as e,w as t,a as i,j as u,t as n,d as o,y as r,g as c,k as d,r as p,e as v,x as f,F as m,A as _,v as y}from"./index-56a3e0d1.js";import{_ as g}from"./uni-icons.f5ef22f9.js";import{r as b,o as k}from"./uni-app.es.615e6353.js";import{p as h}from"./index.be3ddac0.js";import{u as j,C as x}from"./comment.69c6acf7.js";import{_ as C}from"./uni-popup.1aa6a8f8.js";import{_ as w}from"./plugin-vueexport-helper.1b428a4d.js";import{u as I}from"./music.32089d25.js";import"./uni-badge.1255b4c5.js";import"./uni-section.dd6559c8.js";import"./uni-popup.vuevuetypestyleindex0scopeda1518068lang.4ea77e47.js";const U=w({__name:"playlistCover",props:["visible","id","type"],emits:"update:visible",setup(v,{emit:f}){const m=v,_=f,y=a(null),g=a({});l((async()=>{var a,l;if(m.visible){null==(a=y.value)||a.open();const l=await h(m.id);g.value=l.playlist,console.log(l.playlist)}else null==(l=y.value)||l.close()}));const k=a=>{a.show||_("update:visible",!1)};return(a,l)=>{const v=r,f=c,m=d,_=b(p("uni-popup"),C);return s(),e(f,{class:"listcover"},{default:t((()=>[i(_,{ref_key:"popup",ref:y,type:"center","background-color":"#fff",onChange:k},{default:t((()=>[i(f,{class:"header"},{default:t((()=>[i(v,{src:g.value.coverImgUrl,mode:"widthFix"},null,8,["src"]),i(f,null,{default:t((()=>[u(n(g.value.name),1)])),_:1})])),_:1}),i(f,{class:"mian"},{default:t((()=>[i(f,{class:"tags"},{default:t((()=>[i(m,{class:"title"},{default:t((()=>[u("标签：")])),_:1}),g.value.tags.lenght>0?(s(),e(m,{key:0},{default:t((()=>[u(n(g.value.tags),1)])),_:1})):o("",!0)])),_:1}),i(f,{class:"tag"},{default:t((()=>[u(n(g.value.description),1)])),_:1})])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-8a1200b5"]]),z=w({__name:"songsList",setup(l){const o=I(),r=a({}),p=a("");k((a=>{p.value=a.id,(async a=>{const l=await h(a);r.value=l.playlist,console.log(l.playlist)})(a.id)}));const g=a=>{o.setCurPlayList(a,r.value.tracks),_({url:"/pages/player/player"})};return(a,l)=>{const o=y,p=c,_=d;return s(),e(p,{class:"playlist"},{default:t((()=>[i(p,{class:"top-btns"},{default:t((()=>[i(o,{class:"play-btn",type:"default",size:"mini",onClick:g},{default:t((()=>{var a;return[u("播放全部 ("+n(null==(a=r.value.tracks)?void 0:a.length)+")",1)]})),_:1})])),_:1}),i(p,{class:"songs"},{default:t((()=>[(s(!0),v(m,null,f(r.value.tracks,((a,l)=>(s(),e(p,{class:"song-item",key:a.id,onClick:l=>g(a)},{default:t((()=>[u(n(l+1)+"."+n(a.name)+" -- ",1),(s(!0),v(m,null,f(a.ar,(a=>(s(),e(_,null,{default:t((()=>[u(n(a.name)+"/",1)])),_:2},1024)))),256))])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})}}},[["__scopeId","data-v-4f26934a"]]),F=w({__name:"songlist",setup(l){j(),I();const e=a(!1),o=a({}),d=a(""),f=a(!1);return k((a=>{d.value=a.id,(async a=>{const l=await h(a);o.value=l.playlist,console.log(l.playlist)})(a.id)})),(a,l)=>{const _=r,y=c,k=b(p("uni-icons"),g);return s(),v(m,null,[i(y,{class:"header"},{default:t((()=>[i(y,{class:"info"},{default:t((()=>[i(_,{src:o.value.coverImgUrl,mode:"widthFix"},null,8,["src"]),i(y,{class:"right"},{default:t((()=>[i(y,{class:"song-name"},{default:t((()=>[u(n(o.value.name),1)])),_:1}),i(y,{class:"song-info"},{default:t((()=>{var a;return[i(_,{class:"avatar",src:null==(a=o.value.creator)?void 0:a.avatarUrl,mode:"widthFix"},null,8,["src"]),i(y,{class:"nickname"},{default:t((()=>{var a;return[u(n(null==(a=o.value.creator)?void 0:a.nickname),1)]})),_:1})]})),_:1})])),_:1})])),_:1}),i(y,{class:"description",onClick:l[0]||(l[0]=a=>f.value=!0)},{default:t((()=>[u(n(o.value.description),1)])),_:1}),i(y,{class:"btns"},{default:t((()=>[i(y,{class:"btn-item"},{default:t((()=>[i(k,{type:"redo-filled",color:"#fff",size:"20px"}),u(" "+n(o.value.shareCount),1)])),_:1}),i(y,{class:"btn-item",onClick:l[1]||(l[1]=a=>e.value=!0)},{default:t((()=>[i(k,{type:"chat",color:"#fff",size:"20px"}),u(" "+n(o.value.commentCount),1)])),_:1}),i(y,{class:"btn-item"},{default:t((()=>[i(k,{type:"download",color:"#fff",size:"20px"}),u(" "+n(o.value.subscribedCount),1)])),_:1})])),_:1})])),_:1}),i(z),i(U,{visible:f.value,"onUpdate:visible":l[2]||(l[2]=a=>f.value=a),id:d.value,type:"playlist"},null,8,["visible","id"]),i(x,{visible:e.value,"onUpdate:visible":l[3]||(l[3]=a=>e.value=a),id:d.value,type:"playlist"},null,8,["visible","id"])],64)}}},[["__scopeId","data-v-344dfa7f"]]);export{F as default};
